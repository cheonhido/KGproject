<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ìƒì„¸ë³´ê¸°</title>
<script type="text/javascript">
document.addEventListener('DOMContentLoaded', () => {
    const heartButton = document.getElementById('heart1Button');
    const heartImage = document.getElementById('heart1Image');
    const likesCount = document.getElementById('likesCount');
    const commentInput = document.getElementById('commentInput');
    const commentButton = document.getElementById('commentButton');
    const addCommentButton = document.getElementById('addCommentButton');
    const commentsContainer = document.getElementById('comments');
    const saveButton = document.getElementById('saveButton');
    const saveImage = document.getElementById('saveImage');
    const emojiPicker = document.getElementById('emojiPicker'); // ì´ëª¨ì§€ ì„ íƒê¸°
    const emojiToggle = document.querySelector('.view_emoji-toggle'); // ì´ëª¨ì§€ í† ê¸€ ë²„íŠ¼
    
    // ì¢‹ì•„ìš” ë²„íŠ¼ ê¸°ëŠ¥
   const heartButtons = document.querySelectorAll('.heart-button');

    heartButtons.forEach((heartButton) => {
        heartButton.addEventListener('click', () => {
            const postSeq = heartButton.getAttribute('data-post-seq'); // ë°ì´í„° ì†ì„± ê°€ì ¸ì˜¤ê¸°
            const isLiked = heartButton.getAttribute('data-is-liked') === 'true'; // ì¢‹ì•„ìš” ì—¬ë¶€ í™•ì¸

            // ì¢‹ì•„ìš” ìƒíƒœ ë³€ê²½ì„ ìœ„í•œ AJAX ìš”ì²­
            likePost(postSeq, isLiked, heartButton);
        });
    });

    function likePost(postSeq, isLiked, heartButton) {
        const url = isLiked ? '/unlikePost' : '/likePost'; // ì¢‹ì•„ìš” ì—¬ë¶€ì— ë”°ë¥¸ URL ì„¤ì •

        fetch(url, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            body: new URLSearchParams({
                post_seq: postSeq
            })
        })
        .then(response => response.json())
        .then(data => {
            if (data.status === 'success') {
                // ìƒì„¸í™”ë©´ì˜ ì¢‹ì•„ìš” ê°œìˆ˜ ì—…ë°ì´íŠ¸
                const currentLikeCount = document.getElementById('likesCount-' + postSeq);
                if (currentLikeCount) {
                    currentLikeCount.innerText = data.likeCount; // ì¢‹ì•„ìš” ê°œìˆ˜ ì—…ë°ì´íŠ¸
                }

                // ìƒì„¸í™”ë©´ì˜ ì¢‹ì•„ìš” ìƒíƒœ ì—…ë°ì´íŠ¸ (í•˜íŠ¸ ì´ë¯¸ì§€ ë³€ê²½)
                heartButton.setAttribute('data-is-liked', !isLiked); // ì¢‹ì•„ìš” ìƒíƒœ í† ê¸€
                const heartImage = heartButton.querySelector('img');
                if (heartImage) {
                    heartImage.src = !isLiked ? 'img/heart2.png' : 'img/heart1.png'; // ì¢‹ì•„ìš” ìƒíƒœì— ë”°ë¥¸ ì´ë¯¸ì§€ ë³€ê²½
                } else {
                    console.error('í•˜íŠ¸ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }

                // ë¶€ëª¨ ì°½ì˜ ì¢‹ì•„ìš” ê°œìˆ˜ ì—…ë°ì´íŠ¸
                if (window.opener && !window.opener.closed) {
                    const parentLikeCountElement = window.opener.document.getElementById('likesCount-' + postSeq);
                    if (parentLikeCountElement) {
                        parentLikeCountElement.innerText = data.likeCount; // ë¶€ëª¨ ì°½ ì¢‹ì•„ìš” ê°œìˆ˜ ì—…ë°ì´íŠ¸
                    }

                    // ë¶€ëª¨ ì°½ì˜ ì¢‹ì•„ìš” ìƒíƒœ(í•˜íŠ¸ ì´ë¯¸ì§€) ì—…ë°ì´íŠ¸
                    const parentHeartButton = window.opener.document.querySelector(`button[data-post-seq="${postSeq}"]`);
                    if (parentHeartButton) {
                        const parentHeartImage = parentHeartButton.querySelector('img');
                        if (parentHeartImage) {
                            parentHeartButton.setAttribute('data-is-liked', !isLiked);
                            parentHeartImage.src = !isLiked ? 'img/heart2.png' : 'img/heart1.png'; // ë¶€ëª¨ ì°½ì˜ í•˜íŠ¸ ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸
                        } else {
                            console.error('ë¶€ëª¨ ì°½ì˜ í•˜íŠ¸ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                        }
                    } else {
                        console.error('ë¶€ëª¨ ì°½ì˜ heartButtonì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    }
                }
            } else {
                alert('ì¢‹ì•„ìš” ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        })
        .catch(error => {
            console.error('ì˜¤ë¥˜ ë°œìƒ:', error);
            alert('ì¢‹ì•„ìš” ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        });
    }

    
    // comment.png í´ë¦­ ì‹œ comment-inputì— í¬ì»¤ìŠ¤
    commentButton.addEventListener('click', (event) => {
        event.preventDefault(); // ë§í¬ ê¸°ë³¸ ë™ì‘ ë°©ì§€ (í•„ìš”ì— ë”°ë¼)
        commentInput.focus(); // ì»¤ì„œê°€ ê¹œë¹¡ì´ê²Œ í•¨
    });
    
    // ëŒ“ê¸€ ì…ë ¥ë€ì˜ ê°’ì´ ë³€ê²½ë  ë•Œë§ˆë‹¤ í˜¸ì¶œë˜ëŠ” í•¨ìˆ˜
    commentInput.addEventListener('input', () => {
        if (commentInput.value.trim()) {
            addCommentButton.classList.add('active'); // ëŒ“ê¸€ì´ ìˆì„ ë•Œ ë²„íŠ¼ì„ ë¶ˆíˆ¬ëª…í•˜ê²Œ
        } else {
            addCommentButton.classList.remove('active'); // ëŒ“ê¸€ì´ ì—†ì„ ë•Œ ë²„íŠ¼ì„ ë°˜íˆ¬ëª…í•˜ê²Œ
        }
    });
    
   // ëŒ“ê¸€ ì¶”ê°€ ê¸°ëŠ¥
   addCommentButton.addEventListener('click', () => {
       const commentText = commentInput.value.trim();
       const postId = document.getElementById('postId').value;
       const userid = document.getElementById('userid').value;
   
       if (commentText) {
           fetch('/comment/add', {
               method: 'POST',
               headers: {
                   'Content-Type': 'application/x-www-form-urlencoded'
               },
               body: new URLSearchParams({
                   postId: postId,
                   content: commentText,
                   userid: userid
               })
           })
           .then(response => response.json())
           .then(data => {
               // ìƒˆë¡œìš´ ëŒ“ê¸€ì„ ìƒë‹¨ì— ì¶”ê°€
               const newComment = document.createElement('div');
               newComment.className = 'comment';
               newComment.textContent = `${userid}: ${commentText}`;
               
               // ëŒ“ê¸€ì„ ê°€ì¥ ìœ„ì— ì¶”ê°€
               commentsContainer.insertBefore(newComment, commentsContainer.firstChild);
   
               // ëŒ“ê¸€ ì…ë ¥ë€ ì´ˆê¸°í™”
               commentInput.value = '';
           })
           .catch(error => {
               console.error('ëŒ“ê¸€ ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ ë°œìƒ:', error);
               alert('ëŒ“ê¸€ ì¶”ê°€ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
           });
       }
   });



    // ì´ëª¨ì§€ ì¶”ê°€ í•¨ìˆ˜
    function insertEmoji(emoji) {
        const cursorPos = commentInput.selectionStart;
        const textBefore = commentInput.value.substring(0, cursorPos);
        const textAfter = commentInput.value.substring(cursorPos, commentInput.value.length);
        commentInput.value = textBefore + emoji + textAfter;
        commentInput.selectionStart = commentInput.selectionEnd = cursorPos + emoji.length;
        commentInput.focus();
    }

    // ì´ëª¨ì§€ ì„ íƒê¸° í† ê¸€ í•¨ìˆ˜
    function toggleEmojiPicker() {
        emojiPicker.classList.toggle('show');
    }

    // ì´ëª¨ì§€ í† ê¸€ ë²„íŠ¼ì— ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    emojiToggle.addEventListener('click', toggleEmojiPicker);

    // ì´ëª¨ì§€ ì´ë¯¸ì§€ì— í´ë¦­ ì´ë²¤íŠ¸ ì¶”ê°€
    emojiPicker.querySelectorAll('img').forEach(img => {
        img.addEventListener('click', () => {
            insertEmoji(img.alt);
            toggleEmojiPicker(); // ì„ íƒ í›„ ì´ëª¨ì§€ ì„ íƒê¸° ë‹«ê¸°
        });
    });

    // ìºëŸ¬ì…€ ì´ˆê¸° ì„¤ì •
    let slideIndex = 0;
    const slides = document.getElementsByClassName("carousel-slide");

    function showSlide(index) {
        for (let i = 0; i < slides.length; i++) {
            slides[i].style.display = "none";
        }
        slides[index].style.display = "block";
    }

    function nextSlide() {
        slideIndex = (slideIndex + 1) % slides.length;
        showSlide(slideIndex);
    }

    function prevSlide() {
        slideIndex = (slideIndex - 1 + slides.length) % slides.length;
        showSlide(slideIndex);
    }
   
    // ìŠ¬ë¼ì´ë“œê°€ 1ê°œë³´ë‹¤ ë§ì„ ê²½ìš°ì—ë§Œ í™”ì‚´í‘œë¥¼ í‘œì‹œ
    if (slides.length > 1) {
        document.querySelector('.left-arrow').style.display = 'block';
        document.querySelector('.right-arrow').style.display = 'block';
    } else {
        document.querySelector('.left-arrow').style.display = 'none';
        document.querySelector('.right-arrow').style.display = 'none';
    }
    
    // ì²˜ìŒ ìŠ¬ë¼ì´ë“œ í‘œì‹œ
    showSlide(slideIndex);

    // ë²„íŠ¼ ì´ë²¤íŠ¸ ë¦¬ìŠ¤ë„ˆ ì¶”ê°€
    document.querySelector('.left-arrow').addEventListener('click', prevSlide);
    document.querySelector('.right-arrow').addEventListener('click', nextSlide);
    
    // ë™ì˜ìƒ ì¬ìƒ ì œí•œ ì„¤ì •
    const videos = document.querySelectorAll('.carousel-slide video');
    videos.forEach((video) => {
        let playCount = 0;
        const maxPlays = 10; // ìµœëŒ€ ì¬ìƒ íšŸìˆ˜
        video.addEventListener('ended', () => {
            playCount++;
            if (playCount >= maxPlays) {
                video.pause();
                video.currentTime = 0; // ì¬ìƒ ìœ„ì¹˜ ì´ˆê¸°í™” (í•„ìš”ì— ë”°ë¼ ì œê±° ê°€ëŠ¥)
            } else {
                video.play(); // ë‹¤ìŒ ì¬ìƒ
            }
        });
    });
   
    // ì €ì¥ ë²„íŠ¼ ê¸°ëŠ¥
    const saveButtons = document.querySelectorAll('.save-button');

    saveButtons.forEach((saveButton) => {
        saveButton.addEventListener('click', () => {
            const postSeq = saveButton.getAttribute('data-post-seq'); // ë°ì´í„° ì†ì„± ê°€ì ¸ì˜¤ê¸°
            const isSaved = saveButton.getAttribute('data-is-saved') === 'true'; // ì €ì¥ ì—¬ë¶€ í™•ì¸

            // ì €ì¥ ìƒíƒœ ë³€ê²½ì„ ìœ„í•œ AJAX ìš”ì²­
            toggleSave(postSeq, isSaved, saveButton);
        });
    });

    function toggleSave(postSeq, isSaved, saveButton) {
        const url = `/toggleSavePost/${postSeq}`; // ì €ì¥ ì—¬ë¶€ì— ë”°ë¥¸ URL ì„¤ì •

        fetch(url, {
            method: 'POST',
            headers: {
                'Content-Type': 'application/x-www-form-urlencoded'
            },
            body: new URLSearchParams({
                post_seq: postSeq
            })
        })
        .then(response => response.json())
        .then(data => {
            if (data.saved) {
                // ìƒì„¸í™”ë©´ì˜ ì €ì¥ ìƒíƒœ ì—…ë°ì´íŠ¸ (ì €ì¥ ì´ë¯¸ì§€ ë³€ê²½)
                saveButton.setAttribute('data-is-saved', !isSaved); // ì €ì¥ ìƒíƒœ í† ê¸€
                const saveImage = saveButton.querySelector('img');
                if (saveImage) {
                    saveImage.src = !isSaved ? 'img/save5.png' : 'img/save.png'; // ì €ì¥ ìƒíƒœì— ë”°ë¥¸ ì´ë¯¸ì§€ ë³€ê²½
                } else {
                    console.error('ì €ì¥ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                }

                // ë¶€ëª¨ ì°½ì˜ ì €ì¥ ìƒíƒœ ì—…ë°ì´íŠ¸
                if (window.opener && !window.opener.closed) {
                    const parentSaveButton = window.opener.document.querySelector(`a[data-post-seq="${postSeq}"]`);
                    if (parentSaveButton) {
                        const parentSaveImage = parentSaveButton.querySelector('img');
                        if (parentSaveImage) {
                            parentSaveButton.setAttribute('data-is-saved', !isSaved);
                            parentSaveImage.src = !isSaved ? 'img/save5.png' : 'img/save.png'; // ë¶€ëª¨ ì°½ì˜ ì €ì¥ ì´ë¯¸ì§€ ì—…ë°ì´íŠ¸
                        } else {
                            console.error('ë¶€ëª¨ ì°½ì˜ ì €ì¥ ì´ë¯¸ì§€ë¥¼ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                        }
                    } else {
                        console.error('ë¶€ëª¨ ì°½ì˜ saveButtonì„ ì°¾ì„ ìˆ˜ ì—†ìŠµë‹ˆë‹¤.');
                    }
                }
            } else {
                alert('ì €ì¥ ì²˜ë¦¬ì— ì‹¤íŒ¨í–ˆìŠµë‹ˆë‹¤.');
            }
        })
        .catch(error => {
            console.error('ì˜¤ë¥˜ ë°œìƒ:', error);
            alert('ì €ì¥ ì²˜ë¦¬ ì¤‘ ì˜¤ë¥˜ê°€ ë°œìƒí–ˆìŠµë‹ˆë‹¤.');
        });
    }
    
    // í˜ì´ì§€ ë¡œë“œì‹œ ê²Œì‹œê¸€ ì €ì¥ ìƒíƒœ ì ìš©
   window.onload = function() {
       fetch('/savedPosts')
       .then(response => response.json())
       .then(savedPostIds => {
           savedPostIds.forEach(postSeq => {
               const saveButton = document.querySelector(`.save-button[data-post-seq="${postSeq}"]`);
               if (saveButton && saveButton.dataset.isSaved !== 'true') {
                   const saveImage = document.getElementById('saveImage-' + postSeq);
                   saveImage.src = 'img/save5.png';  // ì €ì¥ëœ ìƒíƒœë¡œ ì´ë¯¸ì§€ ë³€ê²½
                   saveButton.dataset.isSaved = 'true';  // ì €ì¥ ìƒíƒœ ì—…ë°ì´íŠ¸
               }
           });
       })
       .catch(error => console.error('Error:', error));
   };

    
});

</script>
<style>
/* CSS ìŠ¤íƒ€ì¼ ì •ì˜ */
body {
    font-family: Arial, sans-serif;
    background-color: #fafafa;
    margin: 0;
    padding: 0;
    display: flex;
    justify-content: center;
    align-items: center;
    height: 100vh;
}

.container {
    display: flex;
    width: 90%;
    max-width: 900px;
    background-color: #fff;
    border: 1px solid #dbdbdb;
    border-radius: 8px;
    overflow: hidden;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
}

/* ì‹œì€ ìˆ˜ì • ì‹œì‘  */
.left-section {
    flex: 1;
    background-color: #000;
    display: flex;
    justify-content: center;
    align-items: center;
    position: relative;
    max-width: 640px; /* ìµœëŒ€ ë„ˆë¹„ë¥¼ ê³ ì •í•´ì¤ë‹ˆë‹¤ */
    height: 700px; /* ê³ ì •ëœ ë†’ì´ ì„¤ì • */
}

/* ì´ë¯¸ì§€, ë™ì˜ìƒ ìºëŸ¬ì…€ ìŠ¤íƒ€ì¼ */
.carousel-container {
   position: relative;
   width: 100%;
   max-width: 640px; /* ê²Œì‹œë¬¼ì˜ ìµœëŒ€ ë„ˆë¹„ ì„¤ì • */
   height: 700px; /* ê²Œì‹œë¬¼ì˜ ê³ ì • ë†’ì´ ì„¤ì • */
   margin: auto;
   overflow: hidden; /* ìŠ¬ë¼ì´ë“œê°€ ì»¨í…Œì´ë„ˆ ë°–ìœ¼ë¡œ ë„˜ì¹˜ì§€ ì•Šë„ë¡ ì„¤ì • */
}

.carousel-slides {
   display: flex; /* ìŠ¬ë¼ì´ë“œë“¤ì´ ì˜†ìœ¼ë¡œ ë‚˜ë€íˆ ë°°ì¹˜ë˜ë„ë¡ ì„¤ì • */
   transition: transform 0.5s ease-in-out; /* ìŠ¬ë¼ì´ë“œ ì „í™˜ ì‹œ ë¶€ë“œëŸ¬ìš´ íš¨ê³¼ */
   width: 100%; /* ìŠ¬ë¼ì´ë“œì˜ ë„ˆë¹„ë¥¼ ì „ì²´ ì»¨í…Œì´ë„ˆ ë„ˆë¹„ë¡œ ì„¤ì • */
   height: 100%; /* ìŠ¬ë¼ì´ë“œ ë†’ì´ë¥¼ ì»¨í…Œì´ë„ˆ ë†’ì´ì— ë§ì¶¤ */
}

.carousel-slide {
   flex: 0 0 100%;
    box-sizing: border-box;
    height: 100%; /* ìŠ¬ë¼ì´ë“œ ë†’ì´ ê³ ì • */
    display: flex;
    justify-content: center;
    align-items: center;
    overflow: hidden; /* ë„˜ì¹˜ëŠ” ë¶€ë¶„ ìˆ¨ê¸°ê¸° */
}

.carousel-slide img, .carousel-slide video {
   width: 100%; /* ì´ë¯¸ì§€ë‚˜ ë¹„ë””ì˜¤ê°€ ìŠ¬ë¼ì´ë“œì˜ ìµœëŒ€ ë„ˆë¹„ë¥¼ ë„˜ì§€ ì•Šë„ë¡ ì„¤ì • */
   height: 100%; /* ì´ë¯¸ì§€ë‚˜ ë¹„ë””ì˜¤ê°€ ìŠ¬ë¼ì´ë“œì˜ ìµœëŒ€ ë†’ì´ë¥¼ ë„˜ì§€ ì•Šë„ë¡ ì„¤ì • */
   object-fit: cover; /* ì»¨í…Œì´ë„ˆì— ë§ê²Œ í¬ê¸° ì¡°ì • ë° ì˜ë¦¬ë„ë¡ ì„¤ì • */
}

.carousel-arrow {
   position: absolute;
   top: 50%;
   transform: translateY(-50%); /* í™”ì‚´í‘œê°€ ì„¸ë¡œ ê°€ìš´ë°ì— ìœ„ì¹˜í•˜ë„ë¡ ì„¤ì • */
   font-size: 24px;
   color: white;
   background-color: rgba(0, 0, 0, 0.5); /* ë°˜íˆ¬ëª…í•œ ë°°ê²½ìƒ‰ìœ¼ë¡œ ê°€ì‹œì„±ì„ ë†’ì„ */
   padding: 10px;
   cursor: pointer; /* ë§ˆìš°ìŠ¤ë¥¼ ì˜¬ë ¸ì„ ë•Œ í´ë¦­ ê°€ëŠ¥í•˜ë„ë¡ ì„¤ì • */
   z-index: 100; /* í™”ì‚´í‘œê°€ ë‹¤ë¥¸ ìš”ì†Œë“¤ë³´ë‹¤ ìœ„ì— í‘œì‹œë˜ë„ë¡ ì„¤ì • */
}

.left-arrow {
   left: 10px; /* ì™¼ìª½ í™”ì‚´í‘œì˜ ìœ„ì¹˜ë¥¼ ì»¨í…Œì´ë„ˆì˜ ì™¼ìª½ì—ì„œ 10px ë–¨ì–´ì§€ë„ë¡ ì„¤ì • */
}

.right-arrow {
   right: 10px;
}
/* ì‹œì€ ìˆ˜ì • ë */

.right-section {
    width: 350px;
    padding: 20px;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
}

.header {
    display: flex;
    align-items: center;
    margin-bottom: 10px;
    border-bottom: 1px solid #dbdbdb;
    padding-bottom: 10px;
}

.profile-pic {
    width: 40px;
    height: 40px;
    border-radius: 50%;
    margin-right: 12px;
}

.username {
    font-weight: bold;
}

.content-container {
    margin-bottom: 20px;
    max-height: 465px;
    overflow-y: scroll;
}

.content-container::-webkit-scrollbar {
    display: none;
}

.description {
    margin-bottom: 20px;
}

.comment_page {
    margin-top: 10px;
}

.comment {
    margin-bottom: 10px;
}

.comment-section {
    display: flex;
    align-items: center;
    border-top: 1px solid #dbdbdb;
    padding-top: 10px;
    margin-top: 10px;
}

.comment-input {
    flex: 1;
    margin-right: 10px;
    padding: 10px;
    border: none;
    font-size: 18px;
    box-sizing: border-box;
    outline: none;
}

.add-comment-button {
    padding: 10px;
    background-color: transparent;
    color: #007bff;
    border: 2px solid transparent;
    cursor: pointer;
    opacity: 0.5;
}

.add-comment-button.active {
    opacity: 1;
    border-color: #007bff;
}

.like-section, .Viewbutton-section {
    display: flex;
    align-items: center;
    margin-bottom: 20px;
    margin-top: 10px;
}

.like-section img, .Viewbutton-section img {
    width: 20px;
    height: 20px;
    margin-right: 8px;
    cursor: pointer;
}

.like-count {
    font-weight: bold;
}

.bottom-section {
    margin-top: auto;
    padding: 0;
    width: 100%;
    box-sizing: border-box;
    border-top: 1px solid #dbdbdb;
}

.Viewpost-time {
    font-size: 12px;
    color: gray;
}
.emoji-picker-wrapper {
    position: relative;
    display: inline-block;
}

.view_emoji-picker {
    display: none;
    position: absolute;
    bottom: 100%;
    left: 0;
    background: #fff;
    border: 1px solid #ddd;
    border-radius: 4px;
    box-shadow: 0 2px 5px rgba(0, 0, 0, 0.2);
    padding: 5px;
    z-index: 10;
    max-height: 300px;
    overflow-y: auto;
    width: 300px;
}

.view_emoji-picker::before {
    content: '';
    position: absolute;
    bottom: -10px;
    left: 20px;
    width: 0;
    height: 0;
    border-left: 10px solid transparent;
    border-right: 10px solid transparent;
    border-top: 10px solid #fff;
    z-index: 1001;
}

.view_emoji-picker img {
    cursor: pointer;
    margin: 2px;
}

.view_emoji-picker.show {
    display: block;
}

.view_emoji-toggle {
    cursor: pointer;
    height: 24px;
    width: 24px;
}

.view_emoji-picker::-webkit-scrollbar {
    width: 8px;
}

.view_emoji-picker::-webkit-scrollbar-thumb {
    background-color: rgba(0, 0, 0, 0.2);
    border-radius: 4px;
}

.view_emoji-picker::-webkit-scrollbar-track {
    background-color: #f1f1f1;
    border-radius: 4px;
}

/* ì‹œì€ ìˆ˜ì • ì‹œì‘ */
.heart-button {
    border: none; /* ë²„íŠ¼ í…Œë‘ë¦¬ ì œê±° */
    background: none; /* ë²„íŠ¼ ë°°ê²½ ì œê±° */
    padding: 0; /* ë²„íŠ¼ ê¸°ë³¸ ì—¬ë°± ì œê±° */
    outline: none; /* í¬ì»¤ìŠ¤ ì‹œ í…Œë‘ë¦¬ ì œê±° */
    cursor: pointer; /* í´ë¦­í•  ìˆ˜ ìˆëŠ” ì† ëª¨ì–‘ ì»¤ì„œ */
}
/* ì‹œì€ ìˆ˜ì • ë */

</style>

</head>
<body>
    <div class="container">
        <div class="left-section">
            <div class="carousel-container">
                <span class="carousel-arrow left-arrow" onclick="prevSlide()">
                    &#10094;
                </span>
            
                <div class="carousel-slides">
                    <!-- ì´ë¯¸ì§€ ìŠ¬ë¼ì´ë“œ -->
                    <th:block th:each="file : ${fileNames}">
                        <div class="carousel-slide">
                            <img th:if="${#strings.endsWith(file.toLowerCase(), '.jpg') or 
                                        #strings.endsWith(file.toLowerCase(), '.jpeg') or 
                                        #strings.endsWith(file.toLowerCase(), '.png') or 
                                        #strings.endsWith(file.toLowerCase(), '.gif') or
                                        #strings.endsWith(file.toLowerCase(), '.jfif')}"
                                 th:src="@{storage/} + ${file.trim()}" alt="Post Image" class="post-media">
                            <video th:if="${#strings.endsWith(file.toLowerCase(), '.mp4') or 
                                          #strings.endsWith(file.toLowerCase(), '.webm') or 
                                          #strings.endsWith(file.toLowerCase(), '.ogg')}" 
                                   th:src="@{storage/} + ${file.trim()}"
                                   width="640" height="360"
                                   class="post-media"
                                   autoplay muted loop controls>
                            </video>
                        </div>
                    </th:block>
                </div>
            
                <span class="carousel-arrow right-arrow" onclick="nextSlide()">
                    &#10095;
                </span>
            </div>
        </div>
      <!-- ì˜¤ë¥¸ìª½ ì„¹ì…˜ -->
        <div class="right-section">
            <div>
                <div class="header">
                    <img th:src="@{storage/} + ${postUserInfo.PFimage}" alt="Profile Picture" class="profile-pic">
                    <span class="username">[[${userid}]]</span>
                </div>

                <div class="content-container">
                    <div class="description">
                        <div class="header">
                            <img th:src="@{storage/} + ${postUserInfo.PFimage}" alt="Profile Picture" class="profile-pic">
                            <span class="username">[[${userid}]]</span>&nbsp;&nbsp;
                            <p th:utext="${content}"></p>
                        </div>
                        
                    </div>
               <!-- ëŒ“ê¸€ ì„¹ì…˜ -->
               <div class="comment_page" id="comments">
                   <th:block th:each="comment : ${commentList}">
                       <div class="comment">
                           <span th:text="${comment.userid}"></span>: <span th:text="${comment.content}"></span>
                       </div>
                   </th:block>
               </div>
                </div>
            </div>

            <div class="bottom-section">
                <div class="Viewbutton-section">
                   <!-- ì¢‹ì•„ìš” ë²„íŠ¼ ì„¹ì…˜ -->
                    <button th:attr="id='heart1Button-' + ${dto.seq}" 
                        class="heart-button" 
                        th:data-post-seq="${dto.seq}" 
                        th:data-is-liked="${isLiked ? 'true' : 'false'}">
                    <img th:attr="id='heart1Image-' + ${dto.seq}" 
                         th:src="${isLiked ? 'img/heart2.png' : 'img/heart1.png'}" 
                         alt="Instagram heart">
                </button>
                    <a href="#" id="commentButton">
                        <img src="img/comment.png" alt="Instagram comment" class="logo">
                    </a>
                    <a href="#">
                        <img src="img/msg.png" alt="Instagram msg" class="logo">
                    </a>
                    <!-- ê²Œì‹œê¸€ ì €ì¥í•˜ê¸° -->
                    <a href="javascript:void(0);" th:id="'save1Button-' + ${dto.seq}"
                  class="save-button" 
                  th:data-post-seq="${dto.seq}" 
                  th:data-is-saved="${dto.is_saved == 1 ? 'true' : 'false'}">
                  <img th:src="${dto.is_saved == 1 ? 'img/save5.png' : 'img/save.png'}" 
                       alt="Instagram save" 
                       class="logo" 
                       th:id="'saveImage-' + ${dto.seq}">
               </a>
                </div>

                <div class="likes-section">
                    ì¢‹ì•„ìš” <span th:id="'likesCount-' + ${dto.seq}">[[${dto.like_count}]]</span>ê°œ <br>
                    <span class="Viewpost-time">ê²Œì‹œë¬¼ ì‘ì„± ê²½ê³¼ëœ ì‹œê°„</span>
                </div>

                <div class="comment-section">
                    <div class="form-group">
                        <div class="bottom-controls">
                            <div class="emoji-picker-wrapper">
                                <img src="img/imo.png" alt="imo" class="view_emoji-toggle" onclick="toggleEmojiPicker()">
                                <div id="emojiPicker" class="view_emoji-picker">
                                    <img src="https://cdn.jsdelivr.net/emojione/assets/4.5/png/32/1f600.png" alt="ğŸ˜€" onclick="insertEmoji('ğŸ˜€')">
                                    <img src="https://cdn.jsdelivr.net/emojione/assets/4.5/png/32/1f602.png" alt="ğŸ˜‚" onclick="insertEmoji('ğŸ˜‚')">
                                    <img src="https://cdn.jsdelivr.net/emojione/assets/4.5/png/32/2764.png" alt="â¤ï¸" onclick="insertEmoji('â¤ï¸')">
                                    <img src="https://cdn.jsdelivr.net/emojione/assets/4.5/png/32/1f525.png" alt="ğŸ”¥" onclick="insertEmoji('ğŸ”¥')">
                                    <img src="https://cdn.jsdelivr.net/emojione/assets/4.5/png/32/1f44d.png" alt="ğŸ‘" onclick="insertEmoji('ğŸ‘')">
                                    <!-- Add more emojis as needed -->
                                </div>
                            </div>
                        </div>
                    </div>
                    <input type="hidden" id="postId" th:value="${dto.seq}">
                <input type="hidden" id="userid" th:value="${from_user}">
                    <input type="text" id="commentInput" class="comment-input" placeholder="ëŒ“ê¸€ ë‹¬ê¸°...">
                    <button id="addCommentButton" class="add-comment-button" style="font-weight:bold; background-color:transparent; color:#007bff; border: 2px solid transparent;">ê²Œì‹œ</button>
                </div>
            </div>
        </div>
    </div>
</body>
</html>
