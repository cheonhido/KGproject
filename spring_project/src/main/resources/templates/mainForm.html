<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Main Layout</title>

<!-- css íŒŒì¼ -->
<link rel="stylesheet" href="../CSS/mainForm.css?v=3">

<!-- javascript íŒŒì¼ -->
<script type="text/javascript" src="../js/mainFormJS_start.js?v=2"></script>
</head>
<body data-page="mainForm">
	<div class="container">
		<!-- ì™¼ìª½ íƒìƒ‰ ë©”ë‰´ -->
		<div class="left-section">
			<h3 class="title">
				<a href="#" id="logoButton"> <img src="img/text_1.png"
					alt="Instagram main_text" class="title_logo">
				</a>
			</h3>
			<ul>
				<li><a href="#" id="homeButton"> <img src="img/home.png"
						alt="Instagram home" class="logo"> <span class="label">í™ˆ</span>
				</a></li>
				<li><a href="#" data-slide="slide-2"> <img
						src="img/search.png" alt="Instagram search" class="logo"> <span
						class="label">ê²€ìƒ‰</span>
				</a></li>
				<li><a href="#" data-slide="slide-3"> <img
						src="img/search_2.png" alt="Instagram search_2" class="logo">
						<span class="label">íƒìƒ‰ íƒ­</span>
				</a></li>
				<!-- ë¦´ìŠ¤ ë¶€ë¶„ -->
				<li><a href="#" data-slide="slide-4" class="middle-slide-view">
						<img src="img/Reels.png" alt="Instagram Reels" class="logo">
						<span class="label">ë¦´ìŠ¤</span>
				</a></li>
				<li><a href="#" data-slide="slide-5">
				    <!-- hasUnreadMessages ê°’ì— ë”°ë¼ ì•„ì´ì½˜ì„ ì¶œë ¥ -->
				    <img th:src="${hasUnreadMessages ? 'img/unread_msg.png' : 'img/msg.png'}" 
				         alt="Instagram msg" class="logo">
				    <span class="label">ë©”ì‹œì§€</span>
				</a></li>
				<li><a href="#" data-slide="slide-6"> <img
						th:if="${follow_list == null or follow_list.isEmpty()}"
						src="img/alarm5.png" alt="Instagram alarm" class="logo"> <img
						th:if="${follow_list != null and !follow_list.isEmpty()}"
						src="img/alarm3.png" alt="Instagram alarm" class="logo"> <span
						class="label">ì•Œë¦¼</span>
				</a></li>
				<label for="savePostButton">
					<li><img src="img/make.png" alt="Instagram make" class="logo">
						<span class="label">ë§Œë“¤ê¸°</span> <input id="savePostButton"
						type="button" onclick="uploadFile(600, 800)"></li>
				</label>
				<li><a data-slide="slide-8"> <img
						th:src="@{storage/} + ${mydb.PFimage}" alt="Instagram Logo"
						class="logo_profile"> <span class="label">í”„ë¡œí•„</span>
				</a></li>
			</ul>
			<li class="more-item"><a href="#" data-slide="slide-more"> <img
					src="img/list.png" alt="Instagram list" class="logo"> <span
					class="label">ë” ë³´ê¸°</span></a></li>


			<!-- ìŠ¬ë¼ì´ë“œ ì•„ì›ƒ íŒ¨ë„ -->
			<!-- ê²€ìƒ‰ -->
			<div class="slide-out" id="slide-2">
				<!-- ê²€ìƒ‰ ê¸°ëŠ¥ íƒ€ì´í‹€ -->
				<div class="search_title">
					<h4>ê²€ìƒ‰</h4>
				</div>

				<!-- ê²€ìƒ‰ ì…ë ¥ë€ -->
				<div class="search-container">
					<input type="text" placeholder="ê²€ìƒ‰" id="search_textField">
					<button id="clear_search">âœ–</button>
				</div>

				<hr>
				<!-- ê²€ìƒ‰ê²°ê³¼ ì¶œë ¥ -->
				<div id="print_search_result"></div>
			</div>

			<!--íƒìƒ‰ íƒ­-->
			<div id="slide-3">
				<form id="profileForm">
					<input type="hidden" id="toUser" name="from_user"
						th:value="${from_user}">
				</form>
			</div>

			<!--DM-->
			<div class="slide-out" id="slide-5">
				<!-- íŒ¨ë„ ìƒë‹¨ì˜ ì‚¬ìš©ì í”„ë¡œí•„ í—¤ë” -->
				<div class="dmpanel-header">
					<!-- í˜„ì¬ ì‚¬ìš©ì í”„ë¡œí•„ ì´ë¯¸ì§€ -->
					<img class="dmheader-profile-img"
						th:src="@{/storage/} + ${mydb.PFimage}" alt="Profile Picture">
					<!-- í˜„ì¬ ì‚¬ìš©ì ì•„ì´ë”” -->
					<span class="dmheader-username" th:text="${mydb.userid}"></span>
				</div>

				<!-- ë©”ì‹œì§€ í…ìŠ¤íŠ¸ ì¶”ê°€ -->
				<div class="dmmessage-title">ë©”ì‹œì§€</div>
				<!-- DM ë¦¬ìŠ¤íŠ¸ -->
				<ul class="dm-list">
					<!-- followM_listë¥¼ ìˆœíšŒí•˜ë©´ì„œ ê° ì‚¬ìš©ìì˜ ì •ë³´ë¥¼ ê°€ì ¸ì˜´ -->
					<th:block th:each="user : ${followM_list}">
						<!-- followM_message_mapì´ nullì´ ì•„ë‹Œì§€ í™•ì¸ -->
						<th:block th:if="${followM_message_map != null}">
							<!-- í•´ë‹¹ ì‚¬ìš©ìì˜ ë©”ì‹œì§€ê°€ ìˆëŠ”ì§€ í™•ì¸ (Keyë¡œ ë©”ì‹œì§€ ì¡´ì¬ ì—¬ë¶€ í™•ì¸) -->
							<th:block
								th:if="${followM_message_map.containsKey(user.userid) && followM_message_map.get(user.userid) != null && !followM_message_map.get(user.userid).isEmpty()}">
								<li class="dm-item" th:data-userid="${user.userid}">
									<!-- ì‚¬ìš©ìì˜ í”„ë¡œí•„ ì´ë¯¸ì§€ ì¶œë ¥ --> <img class="profile-img"
									th:src="@{/storage/} + ${user.PFimage}" alt="Profile Picture">
									<!-- ì‚¬ìš©ì ID ì¶œë ¥ -->
									<div class="user-info">
										<span class="username" th:text="${user.userid}"></span>
										<!-- ë©”ì‹œì§€ ë¦¬ìŠ¤íŠ¸ë¥¼ ê°€ì ¸ì˜´ -->
										<th:block
											th:with="messages=${followM_message_map.get(user.userid)}">
											<!-- ë©”ì‹œì§€ê°€ ë¹„ì–´ ìˆì§€ ì•Šì€ì§€ í™•ì¸ -->
											<th:block th:if="${messages != null && !messages.isEmpty()}">
												<th:block
													th:with="lastMessage=${messages.get(messages.size() - 1)}">
													<!-- ë©”ì‹œì§€ê°€ nullì´ ì•„ë‹Œì§€ í™•ì¸ -->
													<th:block th:if="${lastMessage.message != null}">
														<!-- ë©”ì‹œì§€ê°€ ì´ë¯¸ì§€ë‚˜ ë™ì˜ìƒì¸ì§€ í™•ì¸ -->
														<th:block
															th:if="${lastMessage.message.toLowerCase().endsWith('.jpg') || 
                                            lastMessage.message.toLowerCase().endsWith('.png') || 
                                            lastMessage.message.toLowerCase().endsWith('.mp4') || 
                                            lastMessage.message.toLowerCase().endsWith('.avi')}">
															<span class="message-preview">ì²¨ë¶€ íŒŒì¼ì„ ë³´ëƒˆìŠµë‹ˆë‹¤</span>
														</th:block>
														<!-- ì¼ë°˜ í…ìŠ¤íŠ¸ ë©”ì‹œì§€ë¼ë©´ ë‚´ìš© ì¶œë ¥ (readcheckì™€ senduserì— ë”°ë¼ ìƒ‰ìƒ ë³€ê²½) -->
														<th:block
															th:unless="${lastMessage.message.toLowerCase().endsWith('.jpg') || 
                                            lastMessage.message.toLowerCase().endsWith('.png') || 
                                            lastMessage.message.toLowerCase().endsWith('.mp4') || 
                                            lastMessage.message.toLowerCase().endsWith('.avi')}">
															<span class="message-preview"
																th:text="${lastMessage.message}"
																th:style="${(lastMessage.readcheck == 1) || (lastMessage.readcheck == 0 && lastMessage.senduser == from_user) ? 'color:gray;' : 'color:black;'}"></span>

															<!-- ì½ì§€ ì•Šì€ ë©”ì‹œì§€ì—ë§Œ dot.png ì¶”ê°€ -->
															<th:block
																th:if="${lastMessage.readcheck == 0 && lastMessage.senduser != from_user}">
																<img class="dmdot-icon" src="../img/dot.png"
																	alt="New Message Indicator">
															</th:block>
														</th:block>
													</th:block>
												</th:block>
											</th:block>
										</th:block>
									</div>
								</li>
							</th:block>
						</th:block>
					</th:block>
				</ul>
			</div>


			<!--ì•Œë¦¼-->
			<div class="slide-out" id="slide-6">
				<h3>ì•Œë¦¼</h3>
				<br>
				<table>
					<tr th:each="dto : ${follow_list}">
						<td>[[${dto.from_user}]] ë‹˜ì´ íšŒì›ë‹˜ì„ íŒ”ë¡œìš°í•˜ê¸° ì‹œì‘í–ˆìŠµë‹ˆë‹¤.</td>
						<td>
							<form action="/followResponse" method="post" name="form1">
								<input type="hidden" th:value="${dto.from_user}"
									name="from_user" id="fromUser"> <input type="button"
									class="followBtn_2" value="íŒ”ë¡œìš°">
							</form>
						</td>
					</tr>
				</table>
			</div>
			<!--í”„ë¡œí•„-->
			<div id="slide-8">
				<form id="profileForm">
					<input type="hidden" id="toUser" name="from_user"
						th:value="${from_user}">
				</form>
			</div>
			<!-- ë¡œê·¸ì•„ì›ƒ íŒ¨ë„ -->
			<div class="logout-panel" id="logout-panel">
				<a href="#" onclick="location.href='/logout'">ë¡œê·¸ì•„ì›ƒ</a>
			</div>
		</div>

		<!-- ì¤‘ì•™ í”¼ë“œ -->
		<div class="feed-section">
			<div class="mainbanner">
				<img alt="ìƒë‹¨ë°°ë„ˆ" src="img/mainupper111.png">
			</div>
			<br>
			<th:block th:if="${insta_list != null and !insta_list.isEmpty()}">
				<form action="/mainForm" name="seq_submit">
					<input type="hidden" name="seq" id="seq"
						th:value="${insta_list[0].seq}">
				</form>
			</th:block>
			<th:block th:each="dto, stat : ${insta_list}">
				<div class="post-container"
					th:id="'post-container-' + ${stat.index}"
					th:data-post-id="${dto.seq}">
					<!-- í”„ë¡œí•„ ë° ì‹œê°„ -->
					<div class="profile-section">
						<img th:src="@{|/storage/${pfimage_list[stat.index]}|}"
							alt="Profile Picture" class="profile-pic">
						<div class="profile-info">
							<h2 class="username">[[${dto.userid}]]</h2>
							<span class="post-time">[[${dto.board_date}]]</span>
						</div>
						<div class="profile-menuR">
							<th:block th:if="${from_user != dto.userid}">
								<label for="list1button"> <img alt="ìš°ì¸¡ìƒë‹¨ë©”ë‰´"
									src="instaimage/ê²Œì‹œê¸€ìš°ì¸¡.png"> <input type="button"
									class="list1button" id="list1button">
								</label>
							</th:block>
							<th:block th:if="${from_user == dto.userid}">
								<label th:for="'list2button-' + ${dto.seq}"> <img
									alt="ìš°ì¸¡ìƒë‹¨ë©”ë‰´" src="instaimage/ê²Œì‹œê¸€ìš°ì¸¡.png"> <input
									type="button" class="list2button"
									th:id="'list2button-' + ${dto.seq}"
									th:data-post-seq="${dto.seq}"
									th:data-board-content="${dto.board_content}"
									th:data-board-file="${dto.board_file}">
								</label>
							</th:block>
						</div>
					</div>
					<!-- ë‹¤ë¥¸ì‚¬ëŒ ê²Œì‹œë¬¼ì—ì„œ ë”ë³´ê¸° ëˆŒë €ì„ ë•Œ -->
					<div class="list1overlay" id="list1overlay"></div>
					<div class="list1post">
						<button class="list1button" id="list1button">...</button>
						<div class="plus1menu" id="plus1menu" align="center">
							<div style="color: red">ì‹ ê³ </div>
							<div style="color: red">íŒ”ë¡œìš° ì·¨ì†Œ</div>
							<div>ì¦ê²¨ì°¾ê¸°ì— ì¶”ê°€</div>
							<div>ê²Œì‹œë¬¼ë¡œ ì´ë™</div>
							<div>ê³µìœ  ëŒ€ìƒ...</div>
							<div>ë§í¬ ë³µì‚¬</div>
							<div>í¼ê°€ê¸°</div>
							<div>ì´ ê³„ì • ì •ë³´</div>
							<div>ì·¨ì†Œ</div>
						</div>
					</div>
					<!-- ê°œì¸ ê²Œì‹œë¬¼ì—ì„œ ë”ë³´ê¸° ëˆŒë €ì„ ë•Œ -->
					<div class="list2overlay" th:id="'list2overlay-' + ${dto.seq}"></div>
					<div class="list2post">
						<div class="plus2menu" th:id="'plus2menu-' + ${dto.seq}"
							align="center">
							<div style="color: red">ì‚­ì œ</div>
							<div>ìˆ˜ì •</div>
							<div>ë‹¤ë¥¸ ì‚¬ëŒì—ê²Œ ì¢‹ì•„ìš” ìˆ˜ ìˆ¨ê¸°ê¸°</div>
							<div>ëŒ“ê¸€ ê¸°ëŠ¥ í•´ì œ</div>
							<div>ê²Œì‹œë¬¼ë¡œ ì´ë™</div>
							<div>ê³µìœ  ëŒ€ìƒ...</div>
							<div>ë§í¬ ë³µì‚¬</div>
							<div>í¼ê°€ê¸°</div>
							<div>ì·¨ì†Œ</div>
						</div>
					</div>
					<!-- ì´ë¯¸ì§€/ë™ì˜ìƒ ìºëŸ¬ì…€ -->
					<div class="carousel-container"
						th:id="'carousel-container-' + ${stat.index}">
						<span class="carousel-arrow left-arrow"
							th:id="'left-arrow-' + ${stat.index}"
							th:onclick="'prevSlide(' + ${stat.index} + ')'">&#10094;</span>

						<div class="carousel-slides"
							th:id="'carousel-slides-' + ${stat.index}">
							<th:block
								th:each="fileName : ${#strings.arraySplit(dto.board_file, ',')}">
								<div class="carousel-slide">
									<img
										th:if="${#strings.endsWith(fileName.toLowerCase(), '.jpg') or 
		                                        #strings.endsWith(fileName.toLowerCase(), '.jpeg') or 
		                                        #strings.endsWith(fileName.toLowerCase(), '.png') or 
		                                        #strings.endsWith(fileName.toLowerCase(), '.gif') or
		                                        #strings.endsWith(fileName.toLowerCase(), '.jfif')}"
										th:src="@{storage/} + ${fileName.trim()}" alt="Post Image"
										class="post-media">
									<video
										th:if="${#strings.endsWith(fileName.toLowerCase(), '.mp4') or 
		                                              #strings.endsWith(fileName.toLowerCase(), '.webm') or 
		                                              #strings.endsWith(fileName.toLowerCase(), '.ogg')}"
										th:src="@{storage/} + ${fileName.trim()}" width="640"
										height="360" class="post-media" autoplay muted loop controls>
									</video>
								</div>
							</th:block>
						</div>

						<span class="carousel-arrow right-arrow"
							th:onclick="'nextSlide(' + ${stat.index} + ')'">&#10095;</span>
					</div>

					<!-- ë²„íŠ¼ ì„¹ì…˜ -->
					<div class="button-section">
						<button th:id="'heart1Button-' + ${dto.seq}" class="heart-button"
							th:data-post-seq="${dto.seq}"
							th:data-is-liked="${dto.is_liked == 1 ? 'true' : 'false'}">
							<img th:id="'heart1Image-' + ${dto.seq}"
								th:src="${dto.is_liked == 1 ? 'img/heart2.png' : 'img/heart1.png'}"
								alt="Instagram heart" class="logo">
						</button>
						<a href="#" class="openViewButton" th:data-seq="${dto.seq}"
							th:data-userid="${dto.userid}"
							th:data-filename="${dto.board_file}"
							th:data-content="${dto.board_content}"
							th:data-comments="${#strings.listJoin(dto.comments, ', ')}">
							<img src="instaimage/comment.png" alt="Instagram comment"
							class="logo">
						</a>
						<!-- ê³µìœ ë²„íŠ¼ -->
						<a href="#"> <img src="instaimage/msg.png" alt="Instagram msg"
							class="logo" id="msgButton" onclick="openPopup()">
						</a>

						<!-- íŒì—…ì°½ ì™¸ì˜ ë°°ê²½ì„ ì–´ë‘¡ê²Œ ë§Œë“œëŠ” div ì¶”ê°€ -->
						<div class="popup-background" id="popupBackground"></div>

						<!-- ê³µìœ ë²„íŠ¼ í´ë¦­ì‹œ íŒì—… -->
						<div id="post_popup" class="popup-window">
							<div
								style="position: relative; border-bottom: 1px solid #dbdbdb;">
								<!-- ë‹«ê¸° ë²„íŠ¼ -->
								<span id="post_popup_close" onclick="closePopup()">&times;</span>
								<h3
									style="text-align: center; margin-top: 5px; font-size: 25px;">ê³µìœ </h3>
							</div>

							<!-- ê²€ìƒ‰ : ì „ì²´ìœ ì € -->
							<div style="padding: 10px; border-bottom: 1px solid #dbdbdb;">
								<label for="search_all_user"
									style="font-size: 15px; font-weight: bold;">ë°›ëŠ” ì‚¬ëŒ</label>
								<div id="selected_users"></div>
								<input type="text" id="search_all_user" style="font-size: 15px;"
									placeholder="ê²€ìƒ‰...">
							</div>

							<!-- ì¶”ì²œ : ë§íŒ”ìœ ì € -->
							<div id="recommend_follower">
								<h4 id="list_title" style="font-size: 15px; color: #8e8e8e;">ì¶”ì²œ</h4>
								<ul id="print_followerList">
									<!-- followM_list_random ë¦¬ìŠ¤íŠ¸ë¥¼ ìˆœíšŒí•˜ì—¬ ê° íŒ”ë¡œì›Œ ì¶œë ¥ -->
									<li th:each="followerM : ${followM_list_random}"
										style="display: flex; align-items: center; margin-bottom: 10px;">
										<!-- í”„ë¡œí•„ ì´ë¯¸ì§€ --> <img
										th:src="@{/storage/} + ${followerM.PFimage}"
										alt="[[${followerM.PFimage}]]"
										style="width: 40px; height: 40px; border-radius: 50%; margin-right: 10px;">
										<!-- ì´ë¦„ê³¼ ìœ ì €ëª… -->
										<div>
											<strong th:text="${followerM.username}"></strong><br> <small
												th:text="${followerM.userid}"></small>
										</div> <!-- ì²´í¬ë°•ìŠ¤ ë²„íŠ¼ --> <input type="checkbox"
										th:value="${followerM.userid}" th:name="${followerM.userid}"
										class="post_share_checkbox" style="margin-left: auto;">
									</li>
								</ul>
							</div>

							<!-- ë©”ì‹œì§€ ì…ë ¥ì°½ ì¶”ê°€ -->
							<div id="share_message_box">
								<textarea id="message_textarea" placeholder="ë©”ì‹œì§€ ì“°ê¸°..."></textarea>
							</div>

							<!-- ë³´ë‚´ê¸°ë²„íŠ¼ -->
							<div id="share_submit_button">
								<button id="share_submit_button_ok"
									onclick="sendSelectedFollowers()" disabled>ë³´ë‚´ê¸°</button>
							</div>

							<!-- íˆë“ ìœ¼ë¡œ ë°ì´í„° ë³´ë‚´ê¸° -->
							<input type="hidden" id="share_post_seq" th:value="${dto.seq}" />
							<input type="hidden" id="all_user_list_hidden"
								th:value="${all_user_list}" /> <input type="hidden"
								id="followMListRandom_hidden"
								th:value="${followM_list_random_json}" />
						</div>

						<a href="#" th:id="'save1Button-' + ${dto.seq}"
							class="save-button" style="margin-left: auto;"
							th:data-post-seq="${dto.seq}"
							th:data-is-saved="${dto.is_saved == 1 ? 'true' : 'false'}"> <img
							th:src="${dto.is_saved == 1 ? 'img/save5.png' : 'img/save.png'}"
							alt="Instagram save" class="logo"
							th:id="'saveImage-' + ${dto.seq}">
						</a>
					</div>

					<!-- ì¢‹ì•„ìš” ìˆ˜ -->
					<div class="likes-section" th:id="'likesSection-' + ${stat.index}">
						ì¢‹ì•„ìš” <span th:id="'likesCount-' + ${dto.seq}">[[${dto.like_count}]]</span>ê°œ
					</div>

					<!-- ì‚¬ìš©ì ì•„ì´ë”” ë° í•´ì‹œíƒœê·¸ -->
					<div class="caption-section">
						<p class="caption">
							<strong>[[${dto.userid}]]</strong> <span
								th:utext="${dto.board_content}"></span>
						</p>
					</div>

					<!-- ëŒ“ê¸€ ì„¹ì…˜ -->
					<div class="comments-section"
						th:id="'commentsSection-' + ${dto.seq} + '-' + ${stat.index}">

						<div class="comment" th:each="comment, iterStat : ${dto.comments}"
							th:if="${iterStat.index < 2}"
							th:data-comment-id="${comment.userid}"
							th:data-post-seq="${dto.seq}" th:data-get-id="${comment.id}">

							<strong th:text="${comment.userid}"></strong> <span
								th:text="${comment.content}"></span>

							<th:block th:if="${from_user == comment.userid}">
								<label th:for="'list3button-' + ${comment.id}"> <img
									alt="ëŒ“ê¸€ë©”ë‰´" src="instaimage/ê²Œì‹œê¸€ìš°ì¸¡.png"> <input
									type="button" class="list3button"
									th:id="'list3button-' + ${comment.id}">
								</label>
							</th:block>

							<th:block th:if="${from_user != comment.userid}">
								<label th:for="'list4button-' + ${comment.id}"> <img
									alt="ëŒ“ê¸€ë©”ë‰´" src="instaimage/ê²Œì‹œê¸€ìš°ì¸¡.png"> <input
									type="button" class="list4button"
									th:id="'list4button-' + ${comment.id}">
								</label>
							</th:block>

							<!-- ëŒ“ê¸€ì—ì„œ ë©”ë‰´ ëˆŒë €ì„ ë•Œ ìì‹ ì˜ ì•„ì´ë””ì¼ ê²½ìš° -->
							<div class="list3overlay" th:id="'list3overlay-' + ${comment.id}"></div>
							<div class="list3post">
								<div class="plus3menu" th:id="'plus3menu-' + ${comment.id}"
									align="center">
									<div style="color: red">ì‚­ì œ</div>
									<div>ì·¨ì†Œ</div>
								</div>
							</div>

							<!-- ëŒ“ê¸€ì—ì„œ ë©”ë‰´ ëˆŒë €ì„ ë•Œ ë‹¤ë¥¸ ì‚¬ëŒ ì•„ì´ë””ì¼ ê²½ìš° -->
							<div class="list4overlay" th:id="'list4overlay-' + ${comment.id}"></div>
							<div class="list4post">
								<div class="plus4menu" th:id="'plus4menu-' + ${comment.id}"
									align="center">
									<div style="color: red">ì‹ ê³ </div>
									<div>ì·¨ì†Œ</div>
								</div>
							</div>
						</div>

						<!-- ë‚˜ë¨¸ì§€ ëŒ“ê¸€ì€ ìˆ¨ê¹€ ì²˜ë¦¬ -->
						<div class="comment hidden"
							th:each="comment, iterStat : ${dto.comments}"
							th:if="${iterStat.index >= 2}"
							th:data-comment-id="${comment.userid}"
							th:data-post-seq="${dto.seq}" th:data-get-id="${comment.id}">

							<strong th:text="${comment.userid}"></strong> <span
								th:text="${comment.content}"></span>

							<th:block th:if="${from_user == comment.userid}">
								<label th:for="'list3button-' + ${comment.id}"> <img
									alt="ëŒ“ê¸€ë©”ë‰´" src="instaimage/ê²Œì‹œê¸€ìš°ì¸¡.png"> <input
									type="button" class="list3button"
									th:id="'list3button-' + ${comment.id}">
								</label>
							</th:block>

							<th:block th:if="${from_user != comment.userid}">
								<label th:for="'list4button-' + ${comment.id}"> <img
									alt="ëŒ“ê¸€ë©”ë‰´" src="instaimage/ê²Œì‹œê¸€ìš°ì¸¡.png"> <input
									type="button" class="list4button"
									th:id="'list4button-' + ${comment.id}">
								</label>
							</th:block>

							<!-- ëŒ“ê¸€ì—ì„œ ë©”ë‰´ ëˆŒë €ì„ ë•Œ ìì‹ ì˜ ì•„ì´ë””ì¼ ê²½ìš° -->
							<div class="list3overlay" th:id="'list3overlay-' + ${comment.id}"></div>
							<div class="list3post">
								<div class="plus3menu" th:id="'plus3menu-' + ${comment.id}"
									align="center">
									<div style="color: red">ì‚­ì œ</div>
									<div>ì·¨ì†Œ</div>
								</div>
							</div>

							<!-- ëŒ“ê¸€ì—ì„œ ë©”ë‰´ ëˆŒë €ì„ ë•Œ ë‹¤ë¥¸ ì‚¬ëŒ ì•„ì´ë””ì¼ ê²½ìš° -->
							<div class="list4overlay" th:id="'list4overlay-' + ${comment.id}"></div>
							<div class="list4post">
								<div class="plus4menu" th:id="'plus4menu-' + ${comment.id}"
									align="center">
									<div style="color: red">ì‹ ê³ </div>
									<div>ì·¨ì†Œ</div>
								</div>
							</div>
						</div>

						<!-- ëŒ“ê¸€ì´ 2ê°œ ì´ìƒì¼ ë•Œë§Œ "ëŒ“ê¸€ ëª¨ë‘ë³´ê¸°" ë²„íŠ¼ í‘œì‹œ -->
						<button th:if="${dto.comments.size() > 2}"
							th:id="show-more-comments- + ${dto.seq}"
							th:data-stat-index="${stat.index}" th:data-post-seq="${dto.seq}"
							class="show-more-comments">ëŒ“ê¸€ ëª¨ë‘ë³´ê¸°</button>
					</div>

					<!-- ëŒ“ê¸€ ë‹¬ê¸° -->
					<form action="/insertComment" method="post">
						<div class="add-comment-section"
							th:id="'addCommentSection-' + ${stat.index}">
							<input type="hidden" name="post_seq" id="post_seq"
								th:value="${dto.seq}">
							<th:block th:each="comments : ${dto.comments}">
								<input type="hidden" name="commentId" id="commentId"
									th:value="${comments.userid}">
							</th:block>
							<input type="text" name="content" placeholder="ëŒ“ê¸€ ë‹¬ê¸°..."
								class="comment-input">
							<div class="emoji-picker-wrapper">
								<img src="instaimage/imo.png" alt="imo" class="emoji-toggle"
									th:id="'emojiToggle-' + ${stat.index}"
									th:onclick="toggleEmojiPicker(${stat.index})">
								<div th:id="'emojiPicker-' + ${stat.index}" class="emoji-picker">
									<img
										src="https://cdn.jsdelivr.net/emojione/assets/4.5/png/32/1f600.png"
										alt="ğŸ˜€" th:onclick="insertEmoji('ğŸ˜€', ${stat.index})">
									<img
										src="https://cdn.jsdelivr.net/emojione/assets/4.5/png/32/1f602.png"
										alt="ğŸ˜‚" th:onclick="insertEmoji('ğŸ˜‚', ${stat.index})">
									<img
										src="https://cdn.jsdelivr.net/emojione/assets/4.5/png/32/2764.png"
										alt="â¤ï¸" th:onclick="insertEmoji('â¤ï¸', ${stat.index})">
									<img
										src="https://cdn.jsdelivr.net/emojione/assets/4.5/png/32/1f525.png"
										alt="ğŸ”¥" th:onclick="insertEmoji('ğŸ”¥', ${stat.index})">
									<img
										src="https://cdn.jsdelivr.net/emojione/assets/4.5/png/32/1f44d.png"
										alt="ğŸ‘" th:onclick="insertEmoji('ğŸ‘', ${stat.index})">
								</div>
							</div>
							<button class="submit-comment"
								th:id="'submitComment-' + ${stat.index}"
								style="font-weight: bold; background-color: transparent; color: #007bff; border: 2px solid transparent;">ê²Œì‹œ</button>
						</div>
					</form>
				</div>
			</th:block>
		</div>

		<!-- ì˜¤ë¥¸ìª½ ì„¹ì…˜ (ì¹œêµ¬ ì¶”ì²œ ë“±) -->
		<div class="right-section">
			<form name="myForm" id="myForm">
				<input type="hidden" name="to_user" id="hidden_to_user">
				<table>
					<tr>
						<td><a th:href="@{/MyPage(pageid=${mydb.userid})}"
							th:if="${mydb.PFimage == 'basic_profile.png'}" name="pageid">
								<img th:src="@{storage/} + ${mydb.PFimage}"
								alt="Profile Picture" class="profile-pic">
						</a> <a th:href="@{/MyPage(pageid=${mydb.userid})}" name="pageid"
							th:if="${mydb.PFimage != 'basic_profile.png'}"> <img
								th:src="@{storage/} + ${mydb.PFimage}" alt="Profile Picture"
								class="profile-pic">
						</a></td>
						<td th:data-userid="${mydb.userid}"
							style="width: 200px; padding-left: 10px; font-size: 23px;">
							<a th:href="@{/MyPage(pageid=${mydb.userid})}" name="pageid"
							style="text-decoration: none;">[[${mydb.userid}]]</a>
							<p
								th:if="${mydb.introduce != null and !#strings.isEmpty(mydb.introduce)}"
								class="reco"font-size: 17px;>[[${mydb.introduce}]]</p>
						</td>
						<td><input type="button" id="loginChangeBtn"
							class="loginChangeBtn"
							style="font-weight: bold; background-color: transparent; color: #007bff; border: 2px solid transparent;"
							value="ì „í™˜" onclick="openLoginChangeModal()"></td>
					</tr>
				</table>
			</form>
			<br> <br>

			<table>
				<tr style="height: 40px;">
					<td
						style="width: 190px; color: gray; font-size: 16px; font-weight: bold;">íšŒì›ë‹˜ì„
						ìœ„í•œ ì¶”ì²œ</td>
					<td style="padding-right: 15px; padding-left: 15px;"><a
						name="ptall" th:href="@{/People(userid=${mydb.userid})}">ëª¨ë‘ë³´ê¸°</a></td>
				</tr>
			</table>

			<form name="form1" id="form1">
				<input type="hidden" name="to_user" id="hidden_to_user">
				<table>
					<tr th:each="dto : ${recomend_list}">
						<td><a th:href="@{/MyPage(pageid=${dto.userid})}"
							name="pageid"> <img th:src="@{storage/} + ${dto.PFimage}"
								alt="Profile Picture" class="profile-pic">
						</a></td>
						<td th:data-userid="${dto.userid}"
							style="width: 150px; padding-left: 20px; font-size: 13px;">
							<a th:href="@{/MyPage(pageid=${dto.userid})}"
							style="text-decoration: none;" name="pageid">[[${dto.userid}]]</a>
							<p class="reco">íšŒì›ë‹˜ì„ ìœ„í•œ ì¶”ì²œ</p>
						</td>
						<td><input type="button" id="followBtn_1" class="followBtn_1"
							style="font-weight: bold; background-color: transparent; color: #007bff; border: 2px solid transparent;"
							value="íŒ”ë¡œìš°"></td>
					</tr>
				</table>
			</form>
		</div>
	</div>

	<!-- ë§Œë“¤ê¸° -->
	<div id="modalBackground" class="modal-background"></div>

	<!-- ê³„ì •ì „í™˜ ëª¨ë‹¬ -->
	<div id="loginChangeModal" class="loginChangeModal">
		<div class="loginChangeModal-content">
			<span class="loginChangeModalclose-btn">&times;</span>
			<div class="loginChangeModal-title">ê³„ì • ì „í™˜</div>

			<!-- ì¤‘ì‹¬ ë‚´ìš© -->
			<div class="loginChangeModal-container">
				<div class="icon">
					<img th:src="@{storage/} + ${mydb.PFimage}" alt="Icon">
				</div>
				<div class="text" th:text="${mydb.userid}"></div>
				<div class="AccountCheckIcon">
					<img src="/img/icons8-check-30.png" alt="CheckIcon">
				</div>
			</div>
			<div th:each="account : ${Accounts}"
				class="loginChangeModal-container">
				<div class="icon">
					<a th:href="@{/AccountChange(accountId=${account.userid})}"> <img
						th:src="@{storage/} + ${account.PFimage}" alt="Icon">
					</a>
				</div>
				<div class="text" th:text="${account.userid}"></div>
			</div>

			<!-- ëª¨ë‹¬ í•˜ë‹¨ ë²„íŠ¼ -->
			<button class="loginChangeModal-button"
				onclick="addAndSwitchAccount()">ê³„ì • ì¶”ê°€</button>
		</div>
	</div>

	<!-- ê²€ìƒ‰ê¸°ëŠ¥ script -->
	<!-- Springì—ì„œ ë°›ì€ ë°ì´í„°ë¥¼ JavaScriptë¡œ ì „ë‹¬ -->
	<script type="text/javascript" th:inline="javascript">
		// Springì—ì„œ ë„˜ê²¨ì¤€ ë°ì´í„°ë¥¼ JavaScript ë³€ìˆ˜ë¡œ ë³€í™˜
		var allUserList = /*[[${all_user_list}]]*/'[]';
		var instaListAll = /*[[${insta_list_all}]]*/'[]';
		var loginedId = /*[[${from_user}]]*/'';

		// ê³„ì •ì „í™˜ ê´€ë ¨ ì´ë²¤íŠ¸
		// ëª¨ë‹¬ ì—´ê¸° í•¨ìˆ˜
		function openLoginChangeModal() {
			var loginChangeModal = document.getElementById("loginChangeModal");
			loginChangeModal.style.display = "block";
		}

		// ëª¨ë‹¬ ìš”ì†Œ ê°€ì ¸ì˜¤ê¸°
		var loginChangeModal = document.getElementById("loginChangeModal");
		var loginChangeBtn = document.getElementById("loginChangeBtn");
		var loginChangeModalclose_btn = document
				.getElementsByClassName("loginChangeModalclose-btn")[0];
		var outsideClickCount = 0;

		loginChangeModal.style.display = "none";

		// X ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ë‹«ê¸°
		loginChangeModalclose_btn.onclick = function() {
			loginChangeModal.style.display = "none";
		}

		// ëª¨ë‹¬ ë°”ê¹¥ì„ ë‘ ë²ˆ í´ë¦­í•´ì•¼ ëª¨ë‹¬ ë‹«ê¸°
		window.onclick = function(event) {
			if (event.target == loginChangeModal) {
				outsideClickCount++;
				if (outsideClickCount >= 2) {
					loginChangeModal.style.display = "none";
					outsideClickCount = 0; // í´ë¦­ ì¹´ìš´í„° ì´ˆê¸°í™”
				}
			}
		}

		// ë²„íŠ¼ í´ë¦­ ì‹œ ëª¨ë‹¬ ì—´ê¸°
		loginChangeBtn.onclick = function() {
			openLoginChangeModal();
		}

		function addAndSwitchAccount() {
			var width = 500;
			var height = 500;
			var windowWidth = window.innerWidth;
			var windowHeight = window.innerHeight;
			var windowLeft = window.screenX || window.screenLeft;
			var windowTop = window.screenY || window.screenTop;

			var left = windowLeft + (windowWidth - width) / 2;
			var top = windowTop + (windowHeight - height) / 2;

			var features = `width=${width},height=${height},left=${left},top=${top},scrollbars=yes,resizable=yes`;
			window.open("/addAccountLoginForm", "", features);
		}
	</script>


	<!-- javascript íŒŒì¼ -->
	<script type="text/javascript" src="../js/mainFormJS_end.js?v=2"></script>
</body>
</html>
